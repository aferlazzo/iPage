<doctype html>
<head>
<meta charset=utf-8>
<title>getSprite</title>
<style>
  #spriteImage img {
    //height: 75px;
    background-color: #777;
    margin: 10px 5px 0 0;
  }
</style>
</head>
<body onload='checkBrowser()'>
<form>
	<span id='supportsHTML5'><input type="file" id="fileX" name="fileX"></span>
	<span id='notSupported'><input type="text" id="fileY" name="fileY"></span>
	<output id="fileName"></output>
	<output id="spriteImage"></output>
</form>

<script>
	function checkBrowser(){
		// Check for the FileList API support.

		if (window.FileList) {
			//alert('Great news! FileList API is supported.');
			document.getElementById('notSupported').style.display='none';
			return true;
		} else {
			document.getElementById('supportsHTML5').style.display='none';
			alert('Unfortunately the FileList API is not fully supported by this browser.');
			return false;
		}
	}



	// Use the new HTML 5 API to do local file read in javascript

	function handleFileSelect(evt) {
		var files = evt.target.files; // FileList object

		// Loop through the FileList and render image files as thumbnails.
		for (var i = 0, f; f = files[i]; i++) {

			// Only process image files.
			if (f.type.match('image.*')) {
				var reader = new FileReader();

				// Closure to capture the file information.
				reader.onload = (function(theFile) {
					return function(e) {
						// Render thumbnail.
						var imageDiv = document.createElement('div');
						imageDiv.innerHTML = ['<img class="spriteImage" src="', e.target.result,
									'" title="', theFile.name, '"/>'].join('');
						document.getElementById('spriteImage').insertBefore(imageDiv, null);
					};
				})(f);
			}

		  // Read in the image file as a data URL.
		  reader.readAsDataURL(f);
		}
	}
	  document.getElementById('fileX').addEventListener('change', handleFileSelect, false);
</script>
</body>
</html>
