<doctype html>
<head>
<meta charset=utf-8>
<title>file directory</title>
<style>
  .spriteImage {
    //height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>
</head>
<body onload='checkBrowser()'>
<form>
	<input type="file" id="files" name="files[]" multiple />
	<output id="fileName"></output>
	<output id="spriteFile"></output>
</form>

<script>
	function checkBrowser(){
		// Check for the various File API support.
		//if (window.File && window.FileReader && window.FileList && window.Blob) {
		if (window.FileList) {
		  alert('Great news! FileList API is supported.');
		  return true;
		} else {
		  alert('The File APIs are not fully supported in this browser.');
		  return false;
		}
	}
/*
	// Use the new HTML 5 API to do local file select in javascript

	function handleFileSelect(evt) {
		var files = evt.target.files; // FileList object

		alert('file choosen: ' + files[0].name);
		document.getElementById('fileName').innerHTML = '<h1>' + files[0].name + '</h1>';
	}

	document.getElementById('files').addEventListener('change', handleFileSelect, false);

	// Use the new HTML 5 API to do local file read in javascript
*/
	function handleFileSelect(evt) {
		var files = evt.target.files; // FileList object

		// Loop through the FileList and render image files as thumbnails.
		for (var i = 0, f; f = files[i]; i++) {

		  // Only process image files.
		  if (!f.type.match('image.*')) {
			continue;
		  }

		  var reader = new FileReader();

		  // Closure to capture the file information.
		  reader.onload = (function(theFile) {
			return function(e) {
			  // Render thumbnail.
			  var imageDiv = document.createElement('div');
			  imageDiv.innerHTML = ['<img class="spriteImage" src="', e.target.result,
								'" title="', theFile.name, '"/>'].join('');
			  document.getElementById('spriteFile').insertBefore(imageDiv, null);
			};
		  })(f);

		  // Read in the image file as a data URL.
		  reader.readAsDataURL(f);
		}
	}
	  document.getElementById('files').addEventListener('change', handleFileSelect, false);

</script>
</body>
</html>
